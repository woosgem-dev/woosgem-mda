$schema: schemas/base/component.schema.yaml

component:
  name: SegmentedControl
  category: organism
  description: Mutually exclusive selection control displaying options in a horizontal row. A visual alternative to radio buttons where only one item can be selected at a time.
  complexity: behavioral

semantics:
  tag: div
  role: group

attributes:
  size:
    type: enum
    values: [sm, md, lg]
    default: md
    description: Size of the entire control. All child items inherit this size.
  full-width:
    type: boolean
    default: false
    description: Whether the control fills the parent container width. When true, items are equally divided.
  disabled:
    type: boolean
    default: false
    description: Whether the entire control is disabled. When true, all items become disabled regardless of their individual state.

content:
  default:
    description: Container area for SegmentedControlItem sub-components.
    required: true
    type: component-list
    cardinality: multiple
    accepts: [SegmentedControlItem]

states:
  item-selected:
    visual: Selected item displays a background highlight or indicator. Unselected items show default styling.
    behavior: Only one item can be selected at a time. Selecting a new item deselects the previous one.
    aria:
      selected: true
  item-disabled:
    visual: Disabled item appears dimmed.
    behavior: Click is ignored. Item is not focusable.
    aria:
      disabled: true
  group-disabled:
    visual: All items appear dimmed.
    behavior: All item clicks are ignored.
    aria: {}

interactions:
  select:
    triggers: [click, Enter, Space]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: emit
    payload:
      value: string
      index: number
    description: Selects the item, deselecting the previously selected item. Both the item and parent control must not be disabled.
  navigate-next:
    triggers: [ArrowRight]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: set
    description: Moves focus to the next enabled item, skipping disabled ones.
  navigate-prev:
    triggers: [ArrowLeft]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: set
    description: Moves focus to the previous enabled item, skipping disabled ones.

accessibility:
  aria:
    role: "group (on the container)"
    label: "Descriptive label for the control purpose (via aria-label or aria-labelledby)"
    selected: "true on the selected item"
    disabled: "true on disabled items"
  keyboard:
    Enter: select
    Space: select
    ArrowRight: "Move focus to next item (skip disabled)"
    ArrowLeft: "Move focus to previous item (skip disabled)"
  focus: Roving tabindex pattern. The selected item has tabIndex=0; all others have tabIndex=-1.

visual_mapping:
  class: segmented-control
  data_attributes:
    data-size:
      strategy: value-mapped
      source: size
    data-full-width:
      strategy: present-when-true
      source: full-width
    data-disabled:
      strategy: present-when-true
      source: disabled

composition:
  layout: [SegmentedControlItem]

  rendering:
    strategy: inline
    description: Rendered inline within the normal DOM flow.

  communication:
    pattern: context
    shared_state: [size, disabled, selectedValue]

  sub_components:
    - name: SegmentedControlItem
      tag: button
      description: Individual selectable item within the control. Two or more items are required in a single SegmentedControl.
      required: true
      attributes:
        selected:
          type: boolean
          default: false
          description: Whether this item is currently selected. Only one item can be selected at a time.
        disabled:
          type: boolean
          default: false
          description: Whether this individual item is disabled. Overridden by the parent disabled attribute.
      content:
        default:
          description: Item label text or icon.
          required: true
          type: node
      visual_mapping:
        class: segmented-control-item
        data_attributes:
          data-state:
            strategy: priority-enum
            priority:
              - { when: { attr: selected, eq: true }, value: selected }
              - { when: { attr: disabled, eq: true }, value: disabled }
            fallback: absent
      accessibility:
        aria:
          selected: "true when item is selected"
          disabled: "true when item or parent is disabled"
