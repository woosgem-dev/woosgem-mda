component:
  name: Checkbox
  category: molecule
  complexity: composite
  description: Checkbox component with compound structure of Root (wrapper), Indicator (visual box), and Label (text). Supports checked, unchecked, and indeterminate tri-state

semantics:
  tag: div
  role: checkbox

attributes:
  size:
    type: enum
    values: [sm, md, lg]
    default: md
    description: Checkbox size controlling indicator and label dimensions
  checked:
    type: boolean
    default: false
    description: Checked state of the checkbox
  indeterminate:
    type: boolean
    default: false
    description: Indeterminate state representing partial selection
  disabled:
    type: boolean
    default: false
    description: Disabled state preventing user interaction

content:
  default:
    description: Internal structure containing Indicator and Label sub-components
    required: true
    type: node
    cardinality: single

states:
  unchecked:
    visual: Empty checkbox box displayed
    behavior: Click transitions to checked state
    aria: { checked: false }
  checked:
    visual: Checkmark icon displayed inside indicator
    behavior: Click transitions to unchecked state
    aria: { checked: true }
  indeterminate:
    visual: Horizontal dash icon displayed inside indicator
    behavior: Click transitions to checked state
    aria: { checked: "mixed" }
  disabled:
    visual: Reduced opacity across all sub-components
    behavior: All click and keyboard interaction blocked
    aria: { disabled: true }

interactions:
  toggle:
    triggers: [click, Space]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: toggle
    description: Toggle checkbox between checked and unchecked states
  focus:
    triggers: [Tab]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: emit
    payload: {}
    description: Checkbox receives keyboard focus

accessibility:
  aria:
    checked: "Reflects state as true/false/'mixed'"
    disabled: "Set when disabled=true"
  keyboard:
    Space: toggle
    Tab: focus
  focus: Focus ring displayed on hidden input or checkbox indicator area

visual_mapping:
  class: checkbox
  data_attributes:
    data-size:
      strategy: value-mapped
      source: size
    data-state:
      strategy: priority-enum
      priority:
        - { when: { attr: disabled, eq: true }, value: disabled }
        - { when: { attr: indeterminate, eq: true }, value: indeterminate }
        - { when: { attr: checked, eq: true }, value: checked }
      fallback: unchecked

composition:
  layout: [CheckboxRoot, CheckboxIndicator, CheckboxLabel]
  rendering:
    strategy: inline
    description: Root wraps Indicator and Label as direct children
  communication:
    pattern: context
    shared_state: [size, checked, indeterminate, disabled]

  sub_components:
    - name: CheckboxRoot
      tag: label
      description: Wrapper container extending click area across the entire checkbox. Uses label tag for native click delegation
      required: true
      attributes:
        size:
          type: enum
          values: [sm, md, lg]
          default: md
          description: Root container size
        disabled:
          type: boolean
          default: false
          description: Disabled state propagated to children
      visual_mapping:
        class: checkbox-root
        data_attributes:
          data-size:
            strategy: value-mapped
            source: size
          data-disabled:
            strategy: present-when-true
            source: disabled

    - name: CheckboxIndicator
      tag: span
      description: Visual box element displaying checkmark or indeterminate dash icon. Decorative element with aria-hidden
      required: true
      attributes:
        size:
          type: enum
          values: [sm, md, lg]
          default: md
          description: Indicator box size
        checked:
          type: boolean
          default: false
          description: Checked state from context
        indeterminate:
          type: boolean
          default: false
          description: Indeterminate state from context
        disabled:
          type: boolean
          default: false
          description: Disabled state from context
      content:
        default:
          description: Check or dash icon content
          required: false
          type: node
          cardinality: single
      visual_mapping:
        class: checkbox-indicator
        data_attributes:
          data-size:
            strategy: value-mapped
            source: size
          data-state:
            strategy: priority-enum
            priority:
              - { when: { attr: disabled, eq: true }, value: disabled }
              - { when: { attr: indeterminate, eq: true }, value: indeterminate }
              - { when: { attr: checked, eq: true }, value: checked }
            fallback: unchecked
      accessibility:
        aria:
          hidden: "true (decorative element, actual state managed by hidden input)"
        keyboard: {}
        focus: "Not focusable (decorative)"

    - name: CheckboxLabel
      tag: span
      description: Text label describing the checkbox purpose
      required: false
      attributes:
        disabled:
          type: boolean
          default: false
          description: Disabled state for style dimming
      content:
        default:
          description: Label text content
          required: true
          type: text
          cardinality: single
      visual_mapping:
        class: checkbox-label
        data_attributes:
          data-disabled:
            strategy: present-when-true
            source: disabled

control:
  mode: both
  value:
    type: boolean
    description: Current checked state of the checkbox
  default_value:
    type: boolean
    description: Initial checked state for uncontrolled usage
  on_change:
    payload:
      checked: boolean
      indeterminate: boolean
    description: Fired when checkbox state changes
