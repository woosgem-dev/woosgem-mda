component:
  name: Tab
  category: organism
  description: Tab-based content switching interface. Composed of a TabList containing tab buttons and TabPanels displaying content for the selected tab. Uses roving tabindex for keyboard navigation.
  complexity: behavioral

semantics:
  tag: button
  role: tab

attributes:
  variant:
    type: enum
    values: [underline, filled]
    default: underline
    description: Visual style of the tab. "underline" shows a bottom border indicator; "filled" shows a background fill.
  size:
    type: enum
    values: [sm, md, lg]
    default: md
    description: Size of the tab button.
  color:
    type: enum
    values: [primary, secondary]
    default: primary
    description: Color theme of the tab.
  selected:
    type: boolean
    default: false
    description: Whether this tab is currently selected.
  disabled:
    type: boolean
    default: false
    description: Whether the tab is disabled. Disabled tabs cannot be clicked or selected.
  full-width:
    type: boolean
    default: false
    description: Whether tabs equally divide the parent container width.

content:
  default:
    description: Tab button label text or icon.
    required: true
    type: node

states:
  selected:
    visual: Active tab is highlighted. Underline variant shows a bottom border; filled variant shows a background fill.
    behavior: The corresponding TabPanel is shown.
    aria:
      selected: true
  unselected:
    visual: Inactive tab with default styling.
    behavior: The corresponding TabPanel is hidden.
    aria:
      selected: false
  disabled:
    visual: Dimmed appearance with not-allowed cursor.
    behavior: Click is ignored. Tab is focusable but cannot be activated.
    aria:
      disabled: true

interactions:
  select:
    triggers: [click, Enter, Space]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: emit
    payload:
      value: string
      index: number
    description: Selects this tab and displays its corresponding panel.
  navigate-next:
    triggers: [ArrowRight, ArrowDown]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: set
    description: Moves focus to the next enabled tab in the list, skipping disabled tabs.
  navigate-prev:
    triggers: [ArrowLeft, ArrowUp]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: set
    description: Moves focus to the previous enabled tab in the list, skipping disabled tabs.
  navigate-first:
    triggers: [Home]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: set
    description: Moves focus to the first enabled tab in the list.
  navigate-last:
    triggers: [End]
    condition:
      all:
        - { attr: disabled, eq: false }
    effect: set
    description: Moves focus to the last enabled tab in the list.

accessibility:
  aria:
    selected: "true on the selected tab, false on others"
    disabled: "true on disabled tabs"
    controls: "ID of the TabPanel controlled by this tab"
  keyboard:
    Enter: select
    Space: select
    ArrowRight: "Move focus to next tab (skip disabled)"
    ArrowLeft: "Move focus to previous tab (skip disabled)"
    Home: "Move focus to first tab"
    End: "Move focus to last tab"
  focus: Roving tabindex pattern within the TabList. The selected tab has tabIndex=0; all others have tabIndex=-1.

visual_mapping:
  class: tab
  data_attributes:
    data-variant:
      strategy: value-mapped
      source: variant
    data-size:
      strategy: value-mapped
      source: size
    data-color:
      strategy: value-mapped
      source: color
    data-state:
      strategy: priority-enum
      priority:
        - { when: { attr: selected, eq: true }, value: selected }
        - { when: { attr: disabled, eq: true }, value: disabled }
      fallback: absent
    data-full-width:
      strategy: present-when-true
      source: full-width

composition:
  layout: [TabList, TabPanel]

  rendering:
    strategy: inline
    description: Rendered inline within the normal DOM flow.

  communication:
    pattern: context
    shared_state: [selectedIndex, variant, size, color, full-width]

  sub_components:
    - name: TabList
      tag: div
      description: Container holding all tab buttons. Has role=tablist.
      required: true
      attributes: {}
      content:
        default:
          description: Individual Tab items.
          required: true
          type: component-list
          cardinality: multiple
          accepts: [Tab]
      accessibility:
        aria:
          role: tablist

    - name: TabPanel
      tag: div
      description: Content panel corresponding to a selected tab. Has role=tabpanel.
      required: true
      attributes: {}
      content:
        default:
          description: Panel content displayed when the corresponding tab is selected.
          required: true
          type: node
      accessibility:
        aria:
          role: tabpanel
          labelledby: "ID of the corresponding Tab item"
          hidden: "true when the panel is not selected"
