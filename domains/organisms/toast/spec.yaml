$schema: schemas/base/component.schema.yaml

component:
  name: Toast
  category: organism
  description: Temporary notification message displayed at a screen edge. Supports auto-dismiss with a configurable timer, multiple positioning options, and variant-based styling.
  complexity: behavioral

semantics:
  tag: div
  role: alert

attributes:
  variant:
    type: enum
    values: [info, success, warning, error]
    default: info
    description: Message type determining the visual style, icon, and color.
  position:
    type: enum
    values: [top-right, top-left, bottom-right, bottom-left, top-center, bottom-center]
    default: top-right
    description: Screen position where the toast appears.
  duration:
    type: number
    default: 5000
    min: 0
    description: Auto-dismiss delay in milliseconds. 0 disables auto-dismiss.
  closable:
    type: boolean
    default: true
    description: Whether the close button is displayed, allowing manual dismissal.
  visible:
    type: boolean
    default: true
    description: Whether the toast is currently visible. Controls enter/exit animations.

content:
  default:
    description: Notification message text or custom content.
    required: true
    type: node

states:
  visible:
    visual: Toast is displayed at the configured position with a slide-in and fade-in animation.
    behavior: Auto-dismiss timer starts when duration > 0. Hovering pauses the timer; leaving resumes it with the remaining time.
    aria:
      live: polite
      atomic: true
  hidden:
    visual: Exit animation (slide-out + fade-out) plays, then the toast is removed from the DOM.
    behavior: Timer is cleared. Close callback is invoked.
    aria: {}
  auto-dismissing:
    visual: Transitions from visible to hidden when the duration elapses.
    behavior: The close interaction is triggered automatically.
    aria: {}

interactions:
  close:
    triggers: [close-button-click, timer-elapsed]
    condition:
      all:
        - { attr: visible, eq: true }
    effect: emit
    payload:
      source: string  # "manual" | "auto"
    description: Dismisses the toast. Plays exit animation and then removes it.
  pause-timer:
    triggers: [pointerenter]
    condition:
      all:
        - { attr: visible, eq: true }
        - { attr: duration, neq: 0 }
    effect: set
    description: Pauses the auto-dismiss timer when the pointer enters the toast.
  resume-timer:
    triggers: [pointerleave]
    condition:
      all:
        - { attr: visible, eq: true }
    effect: set
    description: Resumes the auto-dismiss timer with the remaining time when the pointer leaves.

accessibility:
  aria:
    role: alert
    live: "polite — screen reader announces the toast after finishing current speech"
    atomic: "true — entire content is re-read on change"
  keyboard:
    Tab: "Moves focus to the close button or action button when closable=true"
    Enter: "Activates the focused close button or action button"
    Escape: "Dismisses the toast when focus is inside it and closable=true"
  focus: The toast itself does not auto-focus. Only the close button and action button are focusable.

visual_mapping:
  class: toast
  data_attributes:
    data-variant:
      strategy: value-mapped
      source: variant
    data-position:
      strategy: value-mapped
      source: position
    data-closable:
      strategy: present-when-true
      source: closable
    data-visible:
      strategy: present-when-true
      source: visible

composition:
  layout: [ToastIcon, ToastBody, ToastAction]

  rendering:
    strategy: portal
    description: Rendered at the document top-level (body) to avoid z-index stacking context issues. Multiple toasts at the same position stack vertically.

  communication:
    pattern: props
    shared_state: [variant, closable]

  sub_components:
    - name: ToastIcon
      tag: span
      description: Icon area indicating the message type. Displays a default icon based on the variant if no custom icon is provided.
      required: false
      attributes: {}
      content:
        default:
          description: Custom icon. Falls back to variant-specific default icon when not provided.
          required: false
          type: node
      visual_mapping:
        class: toast-icon
        data_attributes: {}

    - name: ToastBody
      tag: div
      description: Main notification message area.
      required: true
      attributes: {}
      content:
        default:
          description: Notification text or custom content.
          required: true
          type: node
      visual_mapping:
        class: toast-body
        data_attributes: {}

    - name: ToastAction
      tag: div
      description: Optional action area for additional buttons (e.g., "Undo").
      required: false
      attributes: {}
      content:
        default:
          description: Action button or link.
          required: false
          type: node
      visual_mapping:
        class: toast-action
        data_attributes: {}
